<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pruebas de Hip√≥tesis - Aplicaci√≥n Interactiva</title>
    
    <!-- MathJax para renderizar LaTeX -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- Chart.js para gr√°ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --bg-color: #ecf0f1;
            --card-bg: #ffffff;
            --text-color: #2c3e50;
            --border-color: #bdc3c7;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            padding-bottom: 30px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            color: white;
            padding: 30px 20px;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-button {
            flex: 1;
            min-width: 150px;
            padding: 15px 25px;
            background: var(--card-bg);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            color: var(--primary-color);
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .tab-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .tab-button.active {
            background: var(--secondary-color);
            color: white;
        }

        .tab-content {
            display: none;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: 1.8em;
            color: var(--primary-color);
            margin-bottom: 20px;
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }

        .card {
            background: var(--bg-color);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
        }

        input[type="number"],
        input[type="text"],
        select {
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
            width: 100%;
        }

        input[type="number"]:focus,
        input[type="text"]:focus,
        select:focus {
            outline: none;
            border-color: var(--secondary-color);
        }

        button {
            padding: 12px 30px;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        button:active {
            transform: translateY(0);
        }

        .result-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid var(--secondary-color);
        }

        .formula-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid var(--secondary-color);
        }

        .theory-section {
            margin: 30px 0;
        }

        .theory-section h3 {
            color: var(--secondary-color);
            margin-bottom: 15px;
        }

        .info-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            color: #856404;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid var(--success-color);
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            color: #155724;
        }

        .error-box {
            background: #f8d7da;
            border-left: 4px solid var(--accent-color);
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            color: #721c24;
        }

        .step-by-step {
            background: #fff;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid var(--success-color);
        }

        .step-by-step h4 {
            color: var(--success-color);
            margin-bottom: 10px;
        }

        .example-btn {
            padding: 10px 20px;
            background: var(--success-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .example-btn:hover {
            background: #229954;
            transform: scale(1.05);
        }

        .canvas-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        canvas {
            max-width: 100%;
            height: auto !important;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        table th,
        table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        table th {
            background: var(--secondary-color);
            color: white;
            font-weight: 600;
        }

        table tr:hover {
            background: var(--bg-color);
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin: 10px 0;
        }

        .radio-group label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
            
            header h1 {
                font-size: 1.8em;
            }
            
            .tab-button {
                min-width: 100%;
            }
        }

        .conclusion {
            font-size: 1.1em;
            font-weight: bold;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .conclusion.reject {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid var(--accent-color);
        }

        .conclusion.no-reject {
            background: #d4edda;
            color: #155724;
            border: 2px solid var(--success-color);
        }

        .hypothesis-display {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border: 2px solid var(--secondary-color);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä Pruebas de Hip√≥tesis Estad√≠sticas</h1>
            <p>Aplicaci√≥n Interactiva - Una y Dos Poblaciones - Inferencia Estad√≠stica</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" onclick="openTab('teoria')">üìö Teor√≠a</button>
            <button class="tab-button" onclick="openTab('una-poblacion')">üî¢ Una Poblaci√≥n</button>
            <button class="tab-button" onclick="openTab('dos-poblaciones')">üë• Dos Poblaciones</button>
            <button class="tab-button" onclick="openTab('visualizacion')">üìä Visualizaci√≥n</button>
            <button class="tab-button" onclick="openTab('ejemplos')">üìù Ejemplos</button>
        </div>

        <!-- Tab 1: Teor√≠a -->
        <div id="teoria" class="tab-content active">
            <h2 class="section-title">Fundamentos de las Pruebas de Hip√≥tesis</h2>
            
            <div class="theory-section">
                <h3>¬øQu√© es una Prueba de Hip√≥tesis?</h3>
                <p>Una <strong>prueba de hip√≥tesis</strong> es un procedimiento estad√≠stico que permite tomar decisiones sobre par√°metros poblacionales bas√°ndose en informaci√≥n muestral.</p>
                
                <div class="formula-box">
                    <p><strong>Elementos fundamentales:</strong></p>
                    <ul>
                        <li><strong>Hip√≥tesis Nula (\(H_0\)):</strong> Afirmaci√≥n sobre el par√°metro poblacional que se asume verdadera</li>
                        <li><strong>Hip√≥tesis Alternativa (\(H_1\) o \(H_a\)):</strong> Afirmaci√≥n que se acepta si hay evidencia suficiente contra \(H_0\)</li>
                        <li><strong>Nivel de significancia (\(\alpha\)):</strong> Probabilidad de rechazar \(H_0\) cuando es verdadera (t√≠picamente 0.05 o 0.01)</li>
                        <li><strong>Estad√≠stico de prueba:</strong> Valor calculado a partir de los datos muestrales</li>
                        <li><strong>Regi√≥n cr√≠tica:</strong> Valores del estad√≠stico que llevan a rechazar \(H_0\)</li>
                        <li><strong>p-valor:</strong> Probabilidad de obtener un resultado al menos tan extremo como el observado, asumiendo que \(H_0\) es verdadera</li>
                    </ul>
                </div>
            </div>

            <div class="theory-section">
                <h3>Tipos de Hip√≥tesis Alternativas</h3>
                
                <table>
                    <thead>
                        <tr>
                            <th>Tipo de Prueba</th>
                            <th>Hip√≥tesis Nula</th>
                            <th>Hip√≥tesis Alternativa</th>
                            <th>Regi√≥n Cr√≠tica</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Bilateral (dos colas)</strong></td>
                            <td>\(H_0: \theta = \theta_0\)</td>
                            <td>\(H_1: \theta \neq \theta_0\)</td>
                            <td>Ambos extremos de la distribuci√≥n</td>
                        </tr>
                        <tr>
                            <td><strong>Unilateral derecha</strong></td>
                            <td>\(H_0: \theta \leq \theta_0\)</td>
                            <td>\(H_1: \theta > \theta_0\)</td>
                            <td>Extremo derecho (cola superior)</td>
                        </tr>
                        <tr>
                            <td><strong>Unilateral izquierda</strong></td>
                            <td>\(H_0: \theta \geq \theta_0\)</td>
                            <td>\(H_1: \theta < \theta_0\)</td>
                            <td>Extremo izquierdo (cola inferior)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="theory-section">
                <h3>Procedimiento de Prueba de Hip√≥tesis</h3>
                
                <div class="step-by-step">
                    <h4>Paso 1: Plantear las Hip√≥tesis</h4>
                    <p>Formular claramente \(H_0\) y \(H_1\) en t√©rminos del par√°metro poblacional.</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 2: Elegir el Nivel de Significancia</h4>
                    <p>Establecer el valor de \(\alpha\) (com√∫nmente 0.05, 0.01 o 0.10).</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 3: Seleccionar el Estad√≠stico de Prueba</h4>
                    <p>Elegir el estad√≠stico apropiado seg√∫n el par√°metro y las condiciones:</p>
                    <ul>
                        <li><strong>Prueba Z:</strong> Para la media con \(\sigma\) conocida o \(n\) grande</li>
                        <li><strong>Prueba t:</strong> Para la media con \(\sigma\) desconocida y \(n\) peque√±a</li>
                        <li><strong>Prueba Z para proporci√≥n:</strong> Para proporciones con \(n\) grande</li>
                    </ul>
                </div>

                <div class="step-by-step">
                    <h4>Paso 4: Calcular el Valor del Estad√≠stico</h4>
                    <p>Usar los datos muestrales para calcular el valor del estad√≠stico de prueba.</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 5: Tomar la Decisi√≥n</h4>
                    <p>Comparar el estad√≠stico calculado con el valor cr√≠tico o comparar el p-valor con \(\alpha\):</p>
                    <ul>
                        <li>Si \(p < \alpha\): Rechazar \(H_0\)</li>
                        <li>Si \(p \geq \alpha\): No rechazar \(H_0\)</li>
                    </ul>
                </div>

                <div class="step-by-step">
                    <h4>Paso 6: Conclusi√≥n</h4>
                    <p>Interpretar el resultado en el contexto del problema.</p>
                </div>
            </div>

            <div class="theory-section">
                <h3>Tipos de Errores</h3>
                
                <table>
                    <thead>
                        <tr>
                            <th></th>
                            <th>\(H_0\) es Verdadera</th>
                            <th>\(H_0\) es Falsa</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>No rechazar \(H_0\)</strong></td>
                            <td style="background: #d4edda;">Decisi√≥n correcta (1 - \(\alpha\))</td>
                            <td style="background: #f8d7da;">Error Tipo II (\(\beta\))</td>
                        </tr>
                        <tr>
                            <td><strong>Rechazar \(H_0\)</strong></td>
                            <td style="background: #f8d7da;">Error Tipo I (\(\alpha\))</td>
                            <td style="background: #d4edda;">Decisi√≥n correcta (Potencia = 1 - \(\beta\))</td>
                        </tr>
                    </tbody>
                </table>

                <div class="info-box" style="margin-top: 20px;">
                    <p><strong>Error Tipo I (\(\alpha\)):</strong> Rechazar \(H_0\) cuando es verdadera (falso positivo)</p>
                    <p><strong>Error Tipo II (\(\beta\)):</strong> No rechazar \(H_0\) cuando es falsa (falso negativo)</p>
                    <p><strong>Potencia de la prueba (1 - \(\beta\)):</strong> Probabilidad de rechazar correctamente \(H_0\) cuando es falsa</p>
                </div>
            </div>

            <div class="theory-section">
                <h3>F√≥rmulas Principales</h3>
                
                <div class="formula-box">
                    <h4>1. Prueba Z para la Media (œÉ conocida)</h4>
                    $$Z = \frac{\bar{x} - \mu_0}{\sigma / \sqrt{n}}$$
                    <p>donde \(\bar{x}\) es la media muestral, \(\mu_0\) es el valor bajo \(H_0\), \(\sigma\) es la desviaci√≥n est√°ndar poblacional, y \(n\) es el tama√±o de muestra.</p>
                </div>

                <div class="formula-box">
                    <h4>2. Prueba t para la Media (œÉ desconocida)</h4>
                    $$t = \frac{\bar{x} - \mu_0}{s / \sqrt{n}}$$
                    <p>donde \(s\) es la desviaci√≥n est√°ndar muestral. Se distribuye como t-Student con \(n-1\) grados de libertad.</p>
                </div>

                <div class="formula-box">
                    <h4>3. Prueba Z para la Proporci√≥n</h4>
                    $$Z = \frac{\hat{p} - p_0}{\sqrt{\frac{p_0(1-p_0)}{n}}}$$
                    <p>donde \(\hat{p} = \frac{x}{n}\) es la proporci√≥n muestral, \(p_0\) es la proporci√≥n bajo \(H_0\), y \(x\) es el n√∫mero de √©xitos.</p>
                </div>
            </div>
        </div>

        <!-- Tab 2: Una Poblaci√≥n -->
        <div id="una-poblacion" class="tab-content">
            <h2 class="section-title">Pruebas de Hip√≥tesis para Una Poblaci√≥n</h2>
            
            <div class="info-box">
                <p>Seleccione el tipo de prueba seg√∫n el par√°metro poblacional que desea evaluar:</p>
                <ul>
                    <li><strong>Media (Œº):</strong> Prueba Z (œÉ conocida) o t (œÉ desconocida)</li>
                    <li><strong>Proporci√≥n (p):</strong> Prueba Z para proporciones</li>
                    <li><strong>Varianza (œÉ¬≤):</strong> Prueba Chi-cuadrado (œá¬≤)</li>
                </ul>
            </div>

            <!-- SECCI√ìN: PRUEBA DE MEDIA -->
            <div class="theory-section">
                <h3>üßÆ Prueba de Hip√≥tesis para la Media (Œº)</h3>
                
                <div class="formula-box">
                    <h4>Prueba Z (œÉ conocida):</h4>
                    $$Z = \frac{\bar{x} - \mu_0}{\sigma / \sqrt{n}}$$
                    
                    <h4 style="margin-top: 15px;">Prueba t (œÉ desconocida):</h4>
                    $$t = \frac{\bar{x} - \mu_0}{s / \sqrt{n}} \quad \text{con } df = n-1$$
                </div>

                <div class="card" style="margin-top: 20px;">
                    <h3>Tipo de Prueba</h3>
                    <div class="radio-group">
                        <label>
                            <input type="radio" name="tipo-prueba-media" value="z" checked onchange="actualizarFormularioMedia()">
                            Prueba Z (œÉ conocida)
                        </label>
                        <label>
                            <input type="radio" name="tipo-prueba-media" value="t" onchange="actualizarFormularioMedia()">
                            Prueba t (œÉ desconocida)
                        </label>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <h3>Datos de la Muestra</h3>
                        
                        <div class="input-group">
                            <label>Media muestral (\(\bar{x}\)):</label>
                            <input type="number" id="media-muestral" step="0.01" value="52">
                        </div>

                        <div class="input-group" id="grupo-sigma">
                            <label>Desviaci√≥n est√°ndar poblacional (\(\sigma\)):</label>
                            <input type="number" id="sigma-poblacional" step="0.01" value="10">
                        </div>

                        <div class="input-group" id="grupo-s" style="display: none;">
                            <label>Desviaci√≥n est√°ndar muestral (\(s\)):</label>
                            <input type="number" id="s-muestral" step="0.01" value="10">
                        </div>

                        <div class="input-group">
                            <label>Tama√±o de muestra (\(n\)):</label>
                            <input type="number" id="n-media" value="36" min="1">
                        </div>

                        <div class="input-group">
                            <label>Valor bajo H‚ÇÄ (\(\mu_0\)):</label>
                            <input type="number" id="mu0" step="0.01" value="50">
                        </div>

                        <div class="input-group">
                            <label>Nivel de significancia (\(\alpha\)):</label>
                            <select id="alpha-media">
                                <option value="0.01">0.01 (99% confianza)</option>
                                <option value="0.05" selected>0.05 (95% confianza)</option>
                                <option value="0.10">0.10 (90% confianza)</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>Tipo de prueba:</label>
                            <select id="tipo-cola-media">
                                <option value="bilateral">Bilateral (‚â†)</option>
                                <option value="derecha">Unilateral derecha (>)</option>
                                <option value="izquierda">Unilateral izquierda (<)</option>
                            </select>
                        </div>

                        <button onclick="calcularPruebaMedia()">Realizar Prueba</button>

                        <div style="margin-top: 15px;">
                            <button class="example-btn" onclick="cargarEjemploMedia(1)">Ejemplo 1</button>
                            <button class="example-btn" onclick="cargarEjemploMedia(2)">Ejemplo 2</button>
                            <button class="example-btn" onclick="cargarEjemploMedia(3)">Ejemplo 3</button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>Resultados</h3>
                        <div id="resultados-media"></div>
                    </div>
                </div>

                <div class="result-box" id="pasos-media" style="display:none;">
                    <h3>Pasos Detallados</h3>
                    <div id="pasos-contenido-media"></div>
                </div>
            </div>

            <!-- SECCI√ìN: PRUEBA DE PROPORCI√ìN -->
            <div class="theory-section">
                <h3>üìà Prueba de Hip√≥tesis para la Proporci√≥n (p)</h3>
                
                <div class="formula-box">
                    <h4>Prueba Z para proporci√≥n:</h4>
                    $$Z = \frac{\hat{p} - p_0}{\sqrt{\frac{p_0(1-p_0)}{n}}}$$
                    <p>donde \(\hat{p} = \frac{x}{n}\) es la proporci√≥n muestral</p>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <h3>Datos de la Muestra</h3>
                        
                        <div class="input-group">
                            <label>N√∫mero de √©xitos (\(x\)):</label>
                            <input type="number" id="x-exitos" value="60" min="0">
                        </div>

                        <div class="input-group">
                            <label>Tama√±o de muestra (\(n\)):</label>
                            <input type="number" id="n-proporcion" value="100" min="1">
                        </div>

                        <div class="input-group">
                            <label>Proporci√≥n bajo H‚ÇÄ (\(p_0\)):</label>
                            <input type="number" id="p0" step="0.01" value="0.5" min="0" max="1">
                        </div>

                        <div class="input-group">
                            <label>Nivel de significancia (\(\alpha\)):</label>
                            <select id="alpha-proporcion">
                                <option value="0.01">0.01 (99% confianza)</option>
                                <option value="0.05" selected>0.05 (95% confianza)</option>
                                <option value="0.10">0.10 (90% confianza)</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>Tipo de prueba:</label>
                            <select id="tipo-cola-proporcion">
                                <option value="bilateral">Bilateral (‚â†)</option>
                                <option value="derecha">Unilateral derecha (>)</option>
                                <option value="izquierda">Unilateral izquierda (<)</option>
                            </select>
                        </div>

                        <button onclick="calcularPruebaProporcion()">Realizar Prueba</button>

                        <div style="margin-top: 15px;">
                            <button class="example-btn" onclick="cargarEjemploProporcion(1)">Ejemplo 1</button>
                            <button class="example-btn" onclick="cargarEjemploProporcion(2)">Ejemplo 2</button>
                            <button class="example-btn" onclick="cargarEjemploProporcion(3)">Ejemplo 3</button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>Resultados</h3>
                        <div id="resultados-proporcion"></div>
                    </div>
                </div>

                <div class="result-box" id="pasos-proporcion" style="display:none;">
                    <h3>Pasos Detallados</h3>
                    <div id="pasos-contenido-proporcion"></div>
                </div>
            </div>

            <!-- SECCI√ìN: PRUEBA DE VARIANZA -->
            <div class="theory-section">
                <h3>üìè Prueba de Hip√≥tesis para la Varianza (œÉ¬≤)</h3>
                
                <div class="info-box">
                    <p><strong>Distribuci√≥n Chi-cuadrado (œá¬≤):</strong> Se utiliza para probar hip√≥tesis sobre la varianza o desviaci√≥n est√°ndar de una poblaci√≥n normal.</p>
                </div>

                <div class="formula-box">
                    <h4>Estad√≠stico de Prueba:</h4>
                    $$\chi^2 = \frac{(n-1)s^2}{\sigma_0^2}$$
                    <p>donde:</p>
                    <ul>
                        <li>\(n\) = tama√±o de muestra</li>
                        <li>\(s^2\) = varianza muestral</li>
                        <li>\(\sigma_0^2\) = varianza bajo H‚ÇÄ</li>
                        <li>Grados de libertad: \(df = n - 1\)</li>
                    </ul>
                    
                    <h4 style="margin-top: 15px;">Hip√≥tesis:</h4>
                    <p><strong>Bilateral:</strong> \(H_0: \sigma^2 = \sigma_0^2\) vs \(H_1: \sigma^2 \neq \sigma_0^2\)</p>
                    <p><strong>Unilateral derecha:</strong> \(H_0: \sigma^2 \leq \sigma_0^2\) vs \(H_1: \sigma^2 > \sigma_0^2\)</p>
                    <p><strong>Unilateral izquierda:</strong> \(H_0: \sigma^2 \geq \sigma_0^2\) vs \(H_1: \sigma^2 < \sigma_0^2\)</p>
                </div>

                <div class="warning-box">
                    <p><strong>‚ö†Ô∏è Nota importante:</strong> Esta prueba es sensible a la violaci√≥n del supuesto de normalidad. Aseg√∫rese de que la poblaci√≥n sea aproximadamente normal antes de aplicar esta prueba.</p>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <h3>Datos de la Muestra</h3>
                        
                        <div class="input-group">
                            <label>Varianza muestral (\(s^2\)):</label>
                            <input type="number" id="varianza-muestral" step="0.01" value="120">
                        </div>

                        <div class="input-group">
                            <label>Tama√±o de muestra (\(n\)):</label>
                            <input type="number" id="n-varianza" value="25" min="2">
                        </div>

                        <div class="input-group">
                            <label>Varianza bajo H‚ÇÄ (\(\sigma_0^2\)):</label>
                            <input type="number" id="sigma0-cuadrado" step="0.01" value="100">
                        </div>

                        <div class="input-group">
                            <label>Nivel de significancia (\(\alpha\)):</label>
                            <select id="alpha-varianza">
                                <option value="0.01">0.01 (99% confianza)</option>
                                <option value="0.05" selected>0.05 (95% confianza)</option>
                                <option value="0.10">0.10 (90% confianza)</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>Tipo de prueba:</label>
                            <select id="tipo-cola-varianza">
                                <option value="bilateral">Bilateral (‚â†)</option>
                                <option value="derecha">Unilateral derecha (>)</option>
                                <option value="izquierda">Unilateral izquierda (<)</option>
                            </select>
                        </div>

                        <button onclick="calcularPruebaVarianza()">Realizar Prueba</button>

                        <div style="margin-top: 15px;">
                            <button class="example-btn" onclick="cargarEjemploVarianza(1)">Ejemplo 1</button>
                            <button class="example-btn" onclick="cargarEjemploVarianza(2)">Ejemplo 2</button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>Resultados</h3>
                        <div id="resultados-varianza"></div>
                    </div>
                </div>

                <div class="result-box" id="pasos-varianza" style="display:none;">
                    <h3>Pasos Detallados</h3>
                    <div id="pasos-contenido-varianza"></div>
                </div>
            </div>
        </div>

        <!-- Tab 3: Dos Poblaciones -->
        <div id="dos-poblaciones" class="tab-content">
            <h2 class="section-title">Pruebas de Hip√≥tesis para Dos Poblaciones</h2>
            
            <div class="info-box">
                <h3>üìä Comparaci√≥n de Dos Poblaciones</h3>
                <p>Las pruebas de hip√≥tesis para dos poblaciones permiten comparar dos grupos independientes o relacionados para determinar si existe una diferencia estad√≠sticamente significativa entre ellos.</p>
            </div>

            <div class="theory-section">
                <h3>Tipos de Pruebas para Dos Poblaciones</h3>
                
                <table>
                    <thead>
                        <tr>
                            <th>Tipo de Prueba</th>
                            <th>Par√°metro</th>
                            <th>Condiciones</th>
                            <th>Estad√≠stico</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Dos medias (muestras independientes)</strong></td>
                            <td>Œº‚ÇÅ - Œº‚ÇÇ</td>
                            <td>Muestras aleatorias independientes</td>
                            <td>t o Z</td>
                        </tr>
                        <tr>
                            <td><strong>Dos medias (muestras pareadas)</strong></td>
                            <td>Œº_d (diferencias)</td>
                            <td>Observaciones pareadas</td>
                            <td>t</td>
                        </tr>
                        <tr>
                            <td><strong>Dos proporciones</strong></td>
                            <td>p‚ÇÅ - p‚ÇÇ</td>
                            <td>n grande, √©xitos ‚â• 5</td>
                            <td>Z</td>
                        </tr>
                        <tr>
                            <td><strong>Dos varianzas</strong></td>
                            <td>œÉ‚ÇÅ¬≤/œÉ‚ÇÇ¬≤</td>
                            <td>Poblaciones normales</td>
                            <td>F</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Comparaci√≥n de Dos Medias Independientes -->
            <div class="theory-section">
                <h3>üî¢ Comparaci√≥n de Dos Medias (Muestras Independientes)</h3>
                
                <div class="formula-box">
                    <h4>Hip√≥tesis:</h4>
                    <p><strong>Bilateral:</strong> \(H_0: \mu_1 = \mu_2\) vs \(H_1: \mu_1 \neq \mu_2\)</p>
                    <p><strong>Unilateral derecha:</strong> \(H_0: \mu_1 \leq \mu_2\) vs \(H_1: \mu_1 > \mu_2\)</p>
                    <p><strong>Unilateral izquierda:</strong> \(H_0: \mu_1 \geq \mu_2\) vs \(H_1: \mu_1 < \mu_2\)</p>
                    
                    <h4 style="margin-top: 20px;">Estad√≠stico de Prueba:</h4>
                    $$t = \frac{(\bar{x}_1 - \bar{x}_2) - (\mu_1 - \mu_2)}{\sqrt{\frac{s_1^2}{n_1} + \frac{s_2^2}{n_2}}}$$
                    
                    <p>Bajo \(H_0\): \(\mu_1 - \mu_2 = 0\), entonces:</p>
                    $$t = \frac{\bar{x}_1 - \bar{x}_2}{\sqrt{\frac{s_1^2}{n_1} + \frac{s_2^2}{n_2}}}$$
                    
                    <p><strong>Grados de libertad (Welch):</strong></p>
                    $$df = \frac{\left(\frac{s_1^2}{n_1} + \frac{s_2^2}{n_2}\right)^2}{\frac{(s_1^2/n_1)^2}{n_1-1} + \frac{(s_2^2/n_2)^2}{n_2-1}}$$
                </div>

                <div class="card" style="margin-top: 20px;">
                    <h3>Calculadora: Comparaci√≥n de Dos Medias</h3>
                    
                    <div class="grid-2">
                        <div>
                            <h4>Poblaci√≥n 1</h4>
                            <div class="input-group">
                                <label>Media muestral (\(\bar{x}_1\)):</label>
                                <input type="number" id="x1-dos" step="0.01" value="85.5">
                            </div>
                            <div class="input-group">
                                <label>Desv. est√°ndar (\(s_1\)):</label>
                                <input type="number" id="s1-dos" step="0.01" value="12.3">
                            </div>
                            <div class="input-group">
                                <label>Tama√±o de muestra (\(n_1\)):</label>
                                <input type="number" id="n1-dos" value="30" min="2">
                            </div>
                        </div>

                        <div>
                            <h4>Poblaci√≥n 2</h4>
                            <div class="input-group">
                                <label>Media muestral (\(\bar{x}_2\)):</label>
                                <input type="number" id="x2-dos" step="0.01" value="78.2">
                            </div>
                            <div class="input-group">
                                <label>Desv. est√°ndar (\(s_2\)):</label>
                                <input type="number" id="s2-dos" step="0.01" value="15.1">
                            </div>
                            <div class="input-group">
                                <label>Tama√±o de muestra (\(n_2\)):</label>
                                <input type="number" id="n2-dos" value="30" min="2">
                            </div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Nivel de significancia (Œ±):</label>
                        <select id="alpha-dos-medias">
                            <option value="0.01">0.01</option>
                            <option value="0.05" selected>0.05</option>
                            <option value="0.10">0.10</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>Tipo de prueba:</label>
                        <select id="tipo-dos-medias">
                            <option value="bilateral">Bilateral (Œº‚ÇÅ ‚â† Œº‚ÇÇ)</option>
                            <option value="mayor">Unilateral (Œº‚ÇÅ > Œº‚ÇÇ)</option>
                            <option value="menor">Unilateral (Œº‚ÇÅ < Œº‚ÇÇ)</option>
                        </select>
                    </div>

                    <button onclick="calcularDosMedias()">Calcular Prueba</button>

                    <div style="margin-top: 15px;">
                        <button class="example-btn" onclick="cargarEjemploDosMedias(1)">Ejemplo 1</button>
                        <button class="example-btn" onclick="cargarEjemploDosMedias(2)">Ejemplo 2</button>
                    </div>

                    <div id="resultados-dos-medias" style="margin-top: 20px;"></div>
                </div>
            </div>

            <!-- Comparaci√≥n de Dos Proporciones -->
            <div class="theory-section">
                <h3>üìä Comparaci√≥n de Dos Proporciones</h3>
                
                <div class="formula-box">
                    <h4>Hip√≥tesis:</h4>
                    <p><strong>Bilateral:</strong> \(H_0: p_1 = p_2\) vs \(H_1: p_1 \neq p_2\)</p>
                    <p><strong>Unilateral:</strong> \(H_0: p_1 \leq p_2\) vs \(H_1: p_1 > p_2\)</p>
                    
                    <h4 style="margin-top: 20px;">Estad√≠stico de Prueba:</h4>
                    $$Z = \frac{\hat{p}_1 - \hat{p}_2}{\sqrt{\hat{p}(1-\hat{p})\left(\frac{1}{n_1} + \frac{1}{n_2}\right)}}$$
                    
                    <p>donde \(\hat{p}\) es la proporci√≥n combinada:</p>
                    $$\hat{p} = \frac{x_1 + x_2}{n_1 + n_2}$$
                </div>

                <div class="card" style="margin-top: 20px;">
                    <h3>Calculadora: Comparaci√≥n de Dos Proporciones</h3>
                    
                    <div class="grid-2">
                        <div>
                            <h4>Poblaci√≥n 1</h4>
                            <div class="input-group">
                                <label>√âxitos (\(x_1\)):</label>
                                <input type="number" id="x1-prop" value="48" min="0">
                            </div>
                            <div class="input-group">
                                <label>Tama√±o muestra (\(n_1\)):</label>
                                <input type="number" id="n1-prop" value="100" min="1">
                            </div>
                        </div>

                        <div>
                            <h4>Poblaci√≥n 2</h4>
                            <div class="input-group">
                                <label>√âxitos (\(x_2\)):</label>
                                <input type="number" id="x2-prop" value="36" min="0">
                            </div>
                            <div class="input-group">
                                <label>Tama√±o muestra (\(n_2\)):</label>
                                <input type="number" id="n2-prop" value="100" min="1">
                            </div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Nivel de significancia (Œ±):</label>
                        <select id="alpha-dos-prop">
                            <option value="0.01">0.01</option>
                            <option value="0.05" selected>0.05</option>
                            <option value="0.10">0.10</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>Tipo de prueba:</label>
                        <select id="tipo-dos-prop">
                            <option value="bilateral">Bilateral (p‚ÇÅ ‚â† p‚ÇÇ)</option>
                            <option value="mayor">Unilateral (p‚ÇÅ > p‚ÇÇ)</option>
                            <option value="menor">Unilateral (p‚ÇÅ < p‚ÇÇ)</option>
                        </select>
                    </div>

                    <button onclick="calcularDosProporciones()">Calcular Prueba</button>

                    <div style="margin-top: 15px;">
                        <button class="example-btn" onclick="cargarEjemploDosProporcion(1)">Ejemplo 1</button>
                        <button class="example-btn" onclick="cargarEjemploDosProporcion(2)">Ejemplo 2</button>
                    </div>

                    <div id="resultados-dos-prop" style="margin-top: 20px;"></div>
                </div>
            </div>

            <!-- Prueba Pareada -->
            <div class="theory-section">
                <h3>üë´ Prueba de Diferencias Pareadas</h3>
                
                <div class="info-box">
                    <p><strong>¬øCu√°ndo usar?</strong> Cuando las observaciones est√°n naturalmente pareadas:</p>
                    <ul>
                        <li>Mediciones antes/despu√©s en los mismos sujetos</li>
                        <li>Pares de gemelos, hermanos</li>
                        <li>Mediciones en pares de objetos similares</li>
                    </ul>
                </div>

                <div class="formula-box">
                    <h4>Procedimiento:</h4>
                    <p>1. Calcular las diferencias: \(d_i = x_{1i} - x_{2i}\)</p>
                    <p>2. Calcular \(\bar{d}\) y \(s_d\)</p>
                    <p>3. Usar prueba t para una muestra sobre las diferencias:</p>
                    
                    $$t = \frac{\bar{d} - \mu_0}{s_d / \sqrt{n}}$$
                    
                    <p>donde t√≠picamente \(\mu_0 = 0\) (no hay diferencia)</p>
                    <p><strong>Grados de libertad:</strong> \(df = n - 1\)</p>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <h3>Calculadora: Prueba Pareada</h3>
                    
                    <div class="input-group">
                        <label>Media de diferencias (\(\bar{d}\)):</label>
                        <input type="number" id="d-media" step="0.01" value="5.2">
                    </div>

                    <div class="input-group">
                        <label>Desv. est√°ndar diferencias (\(s_d\)):</label>
                        <input type="number" id="d-std" step="0.01" value="8.5">
                    </div>

                    <div class="input-group">
                        <label>N√∫mero de pares (n):</label>
                        <input type="number" id="n-pareada" value="20" min="2">
                    </div>

                    <div class="input-group">
                        <label>Diferencia bajo H‚ÇÄ (\(\mu_0\)):</label>
                        <input type="number" id="mu0-pareada" step="0.01" value="0">
                    </div>

                    <div class="input-group">
                        <label>Nivel de significancia (Œ±):</label>
                        <select id="alpha-pareada">
                            <option value="0.01">0.01</option>
                            <option value="0.05" selected>0.05</option>
                            <option value="0.10">0.10</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>Tipo de prueba:</label>
                        <select id="tipo-pareada">
                            <option value="bilateral">Bilateral (Œº_d ‚â† 0)</option>
                            <option value="mayor">Unilateral (Œº_d > 0)</option>
                            <option value="menor">Unilateral (Œº_d < 0)</option>
                        </select>
                    </div>

                    <button onclick="calcularPareada()">Calcular Prueba</button>

                    <div style="margin-top: 15px;">
                        <button class="example-btn" onclick="cargarEjemploPareada(1)">Antes/Despu√©s</button>
                        <button class="example-btn" onclick="cargarEjemploPareada(2)">Tratamiento</button>
                    </div>

                    <div id="resultados-pareada" style="margin-top: 20px;"></div>
                </div>
            </div>

            <!-- Ejemplos Aplicados -->
            <div class="theory-section">
                <h3>üìù Ejemplo Resuelto: Comparaci√≥n de Dos Grupos</h3>
                
                <div class="info-box">
                    <p><strong>Problema:</strong> Un investigador quiere comparar la efectividad de dos m√©todos de ense√±anza. Grupo A (m√©todo tradicional): \(\bar{x}_1 = 75\), \(s_1 = 10\), \(n_1 = 30\). Grupo B (m√©todo nuevo): \(\bar{x}_2 = 82\), \(s_2 = 12\), \(n_2 = 30\). ¬øHay diferencia significativa? Use Œ± = 0.05.</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 1: Hip√≥tesis</h4>
                    <div class="hypothesis-display">
                        $$H_0: \mu_1 = \mu_2 \text{ (no hay diferencia)}$$
                        $$H_1: \mu_1 \neq \mu_2 \text{ (hay diferencia)}$$
                    </div>
                </div>

                <div class="step-by-step">
                    <h4>Paso 2: Estad√≠stico</h4>
                    $$t = \frac{75 - 82}{\sqrt{\frac{10^2}{30} + \frac{12^2}{30}}} = \frac{-7}{\sqrt{3.333 + 4.8}} = \frac{-7}{2.85} = -2.46$$
                </div>

                <div class="step-by-step">
                    <h4>Paso 3: Decisi√≥n</h4>
                    <p>Para Œ± = 0.05 bilateral y df ‚âà 56, valor cr√≠tico ‚âà ¬±2.00</p>
                    <p>Como |-2.46| > 2.00, <strong>rechazamos H‚ÇÄ</strong></p>
                    <p><strong>p-valor ‚âà 0.017</strong></p>
                </div>

                <div class="success-box">
                    <h4>Conclusi√≥n</h4>
                    <p>Existe evidencia estad√≠stica significativa de que el m√©todo nuevo (B) produce mejores resultados que el m√©todo tradicional (A). La diferencia promedio de 7 puntos es estad√≠sticamente significativa.</p>
                </div>
            </div>
        </div>

        <!-- Tab 5: Visualizaci√≥n -->
        <div id="visualizacion" class="tab-content">
            <h2 class="section-title">Visualizaci√≥n de Pruebas de Hip√≥tesis</h2>
            
            <div class="info-box">
                <p>Esta visualizaci√≥n muestra la distribuci√≥n del estad√≠stico de prueba bajo la hip√≥tesis nula, con la regi√≥n cr√≠tica sombreada y el valor calculado del estad√≠stico marcado.</p>
            </div>

            <div class="card">
                <h3>Configurar Visualizaci√≥n</h3>
                
                <div class="input-group">
                    <label>Tipo de distribuci√≥n:</label>
                    <select id="tipo-dist-visual">
                        <option value="normal">Normal (Z)</option>
                        <option value="t">t-Student</option>
                    </select>
                </div>

                <div class="input-group" id="grupo-gl" style="display: none;">
                    <label>Grados de libertad:</label>
                    <input type="number" id="gl-visual" value="20" min="1">
                </div>

                <div class="input-group">
                    <label>Valor del estad√≠stico:</label>
                    <input type="number" id="estadistico-visual" step="0.01" value="2.5">
                </div>

                <div class="input-group">
                    <label>Nivel de significancia (\(\alpha\)):</label>
                    <select id="alpha-visual">
                        <option value="0.01">0.01</option>
                        <option value="0.05" selected>0.05</option>
                        <option value="0.10">0.10</option>
                    </select>
                </div>

                <div class="input-group">
                    <label>Tipo de prueba:</label>
                    <select id="tipo-prueba-visual">
                        <option value="bilateral">Bilateral</option>
                        <option value="derecha">Unilateral derecha</option>
                        <option value="izquierda">Unilateral izquierda</option>
                    </select>
                </div>

                <button onclick="generarVisualizacion()">Generar Gr√°fico</button>
            </div>

            <div class="canvas-container">
                <canvas id="grafico-distribucion"></canvas>
            </div>

            <div id="info-visual"></div>
        </div>

        <!-- Tab 5: Ejemplos -->
        <div id="ejemplos" class="tab-content">
            <h2 class="section-title">Ejemplos Resueltos Paso a Paso</h2>
            
            <div class="theory-section">
                <h3>Ejemplo 1: Prueba Z para la Media (Bilateral)</h3>
                
                <div class="info-box">
                    <p><strong>Problema:</strong> Una m√°quina embotelladora llena botellas de refresco que deben contener 500 ml. Se sabe que la desviaci√≥n est√°ndar del proceso es œÉ = 10 ml. Un inspector toma una muestra de 36 botellas y encuentra una media de 497 ml. ¬øHay evidencia suficiente para afirmar que la m√°quina no est√° funcionando correctamente? Use Œ± = 0.05.</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 1: Plantear las Hip√≥tesis</h4>
                    <div class="hypothesis-display">
                        $$H_0: \mu = 500 \text{ ml (la m√°quina funciona correctamente)}$$
                        $$H_1: \mu \neq 500 \text{ ml (la m√°quina no funciona correctamente)}$$
                    </div>
                    <p>Es una prueba bilateral porque queremos detectar cualquier desviaci√≥n de 500 ml.</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 2: Nivel de Significancia</h4>
                    <p>$$\alpha = 0.05$$</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 3: Estad√≠stico de Prueba</h4>
                    <p>Como œÉ es conocida, usamos la prueba Z:</p>
                    $$Z = \frac{\bar{x} - \mu_0}{\sigma / \sqrt{n}}$$
                </div>

                <div class="step-by-step">
                    <h4>Paso 4: Calcular el Estad√≠stico</h4>
                    <p>Datos:</p>
                    <ul>
                        <li>\(\bar{x} = 497\) ml</li>
                        <li>\(\mu_0 = 500\) ml</li>
                        <li>\(\sigma = 10\) ml</li>
                        <li>\(n = 36\)</li>
                    </ul>
                    
                    $$Z = \frac{497 - 500}{10 / \sqrt{36}} = \frac{-3}{10/6} = \frac{-3}{1.667} = -1.80$$
                </div>

                <div class="step-by-step">
                    <h4>Paso 5: Valor Cr√≠tico y Decisi√≥n</h4>
                    <p>Para una prueba bilateral con Œ± = 0.05:</p>
                    $$Z_{\alpha/2} = Z_{0.025} = \pm 1.96$$
                    
                    <p><strong>Regi√≥n de rechazo:</strong> \(Z < -1.96\) o \(Z > 1.96\)</p>
                    <p><strong>Estad√≠stico calculado:</strong> \(Z = -1.80\)</p>
                    
                    <p>Como \(-1.96 < -1.80 < 1.96\), el estad√≠stico NO cae en la regi√≥n cr√≠tica.</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 6: Calcular el p-valor</h4>
                    <p>Para Z = -1.80 en una prueba bilateral:</p>
                    $$p\text{-valor} = 2 \times P(Z < -1.80) = 2 \times 0.0359 = 0.0718$$
                    
                    <p>Como \(p = 0.0718 > \alpha = 0.05\), no rechazamos \(H_0\).</p>
                </div>

                <div class="success-box">
                    <h4>Conclusi√≥n</h4>
                    <p>Con un nivel de significancia del 5%, <strong>NO hay evidencia suficiente</strong> para afirmar que la m√°quina no est√° funcionando correctamente. La diferencia observada de 3 ml puede atribuirse a la variabilidad aleatoria del muestreo.</p>
                </div>
            </div>

            <div class="theory-section">
                <h3>Ejemplo 2: Prueba t para la Media (Unilateral)</h3>
                
                <div class="info-box">
                    <p><strong>Problema:</strong> Un fabricante afirma que la vida √∫til promedio de sus bater√≠as es de al menos 40 horas. Se prueba una muestra de 25 bater√≠as y se obtiene una media de 38.5 horas con desviaci√≥n est√°ndar de 4.2 horas. ¬øContradicen estos datos la afirmaci√≥n del fabricante? Use Œ± = 0.05.</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 1: Plantear las Hip√≥tesis</h4>
                    <div class="hypothesis-display">
                        $$H_0: \mu \geq 40 \text{ horas (afirmaci√≥n del fabricante)}$$
                        $$H_1: \mu < 40 \text{ horas (contradicci√≥n)}$$
                    </div>
                    <p>Es una prueba unilateral izquierda porque queremos probar si la media es menor.</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 2: Nivel de Significancia</h4>
                    <p>$$\alpha = 0.05$$</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 3: Estad√≠stico de Prueba</h4>
                    <p>Como œÉ es desconocida y n es peque√±a, usamos la prueba t:</p>
                    $$t = \frac{\bar{x} - \mu_0}{s / \sqrt{n}}$$
                    <p>con \(n - 1 = 24\) grados de libertad.</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 4: Calcular el Estad√≠stico</h4>
                    <p>Datos:</p>
                    <ul>
                        <li>\(\bar{x} = 38.5\) horas</li>
                        <li>\(\mu_0 = 40\) horas</li>
                        <li>\(s = 4.2\) horas</li>
                        <li>\(n = 25\)</li>
                    </ul>
                    
                    $$t = \frac{38.5 - 40}{4.2 / \sqrt{25}} = \frac{-1.5}{4.2/5} = \frac{-1.5}{0.84} = -1.786$$
                </div>

                <div class="step-by-step">
                    <h4>Paso 5: Valor Cr√≠tico y Decisi√≥n</h4>
                    <p>Para una prueba unilateral izquierda con Œ± = 0.05 y 24 gl:</p>
                    $$t_{0.05, 24} = -1.711$$
                    
                    <p><strong>Regi√≥n de rechazo:</strong> \(t < -1.711\)</p>
                    <p><strong>Estad√≠stico calculado:</strong> \(t = -1.786\)</p>
                    
                    <p>Como \(-1.786 < -1.711\), el estad√≠stico S√ç cae en la regi√≥n cr√≠tica.</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 6: p-valor</h4>
                    <p>Para t = -1.786 con 24 gl en una prueba unilateral:</p>
                    $$p\text{-valor} \approx 0.043$$
                    
                    <p>Como \(p = 0.043 < \alpha = 0.05\), rechazamos \(H_0\).</p>
                </div>

                <div class="error-box">
                    <h4>Conclusi√≥n</h4>
                    <p>Con un nivel de significancia del 5%, <strong>S√ç hay evidencia suficiente</strong> para afirmar que la vida √∫til promedio de las bater√≠as es menor a 40 horas. Los datos contradicen la afirmaci√≥n del fabricante.</p>
                </div>
            </div>

            <div class="theory-section">
                <h3>Ejemplo 3: Prueba Z para la Proporci√≥n</h3>
                
                <div class="info-box">
                    <p><strong>Problema:</strong> Un candidato pol√≠tico afirma que tiene el apoyo del 60% de los votantes. En una encuesta a 200 votantes, 108 declararon que votar√≠an por √©l. ¬øHay evidencia suficiente para afirmar que su proporci√≥n de apoyo es diferente al 60%? Use Œ± = 0.01.</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 1: Plantear las Hip√≥tesis</h4>
                    <div class="hypothesis-display">
                        $$H_0: p = 0.60$$
                        $$H_1: p \neq 0.60$$
                    </div>
                </div>

                <div class="step-by-step">
                    <h4>Paso 2: Nivel de Significancia</h4>
                    <p>$$\alpha = 0.01$$</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 3: Estad√≠stico de Prueba</h4>
                    $$Z = \frac{\hat{p} - p_0}{\sqrt{\frac{p_0(1-p_0)}{n}}}$$
                </div>

                <div class="step-by-step">
                    <h4>Paso 4: Calcular el Estad√≠stico</h4>
                    <p>Datos:</p>
                    <ul>
                        <li>\(x = 108\) (votantes a favor)</li>
                        <li>\(n = 200\)</li>
                        <li>\(\hat{p} = \frac{108}{200} = 0.54\)</li>
                        <li>\(p_0 = 0.60\)</li>
                    </ul>
                    
                    $$Z = \frac{0.54 - 0.60}{\sqrt{\frac{0.60(0.40)}{200}}} = \frac{-0.06}{\sqrt{\frac{0.24}{200}}} = \frac{-0.06}{\sqrt{0.0012}} = \frac{-0.06}{0.0346} = -1.73$$
                </div>

                <div class="step-by-step">
                    <h4>Paso 5: Valor Cr√≠tico y Decisi√≥n</h4>
                    <p>Para una prueba bilateral con Œ± = 0.01:</p>
                    $$Z_{\alpha/2} = Z_{0.005} = \pm 2.576$$
                    
                    <p><strong>Regi√≥n de rechazo:</strong> \(Z < -2.576\) o \(Z > 2.576\)</p>
                    <p><strong>Estad√≠stico calculado:</strong> \(Z = -1.73\)</p>
                    
                    <p>Como \(-2.576 < -1.73 < 2.576\), NO rechazamos \(H_0\).</p>
                </div>

                <div class="step-by-step">
                    <h4>Paso 6: p-valor</h4>
                    <p>Para Z = -1.73 en una prueba bilateral:</p>
                    $$p\text{-valor} = 2 \times P(Z < -1.73) = 2 \times 0.0418 = 0.0836$$
                    
                    <p>Como \(p = 0.0836 > \alpha = 0.01\), no rechazamos \(H_0\).</p>
                </div>

                <div class="success-box">
                    <h4>Conclusi√≥n</h4>
                    <p>Con un nivel de significancia del 1%, <strong>NO hay evidencia suficiente</strong> para afirmar que la proporci√≥n de apoyo es diferente al 60%. Aunque la muestra mostr√≥ 54%, esta diferencia podr√≠a deberse al azar.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Gesti√≥n de tabs
        function openTab(tabName) {
            const contents = document.getElementsByClassName('tab-content');
            const buttons = document.getElementsByClassName('tab-button');
            
            for (let content of contents) {
                content.classList.remove('active');
            }
            
            for (let button of buttons) {
                button.classList.remove('active');
            }
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Actualizar MathJax
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }

        // Actualizar formulario seg√∫n tipo de prueba
        function actualizarFormularioMedia() {
            const tipoSeleccionado = document.querySelector('input[name="tipo-prueba-media"]:checked').value;
            
            if (tipoSeleccionado === 'z') {
                document.getElementById('grupo-sigma').style.display = 'block';
                document.getElementById('grupo-s').style.display = 'none';
            } else {
                document.getElementById('grupo-sigma').style.display = 'none';
                document.getElementById('grupo-s').style.display = 'block';
            }
        }

        // Funci√≥n para calcular la distribuci√≥n normal est√°ndar acumulada
        function normalCDF(z) {
            const t = 1 / (1 + 0.2316419 * Math.abs(z));
            const d = 0.3989423 * Math.exp(-z * z / 2);
            const prob = d * t * (0.3193815 + t * (-0.3565638 + t * (1.781478 + t * (-1.821256 + t * 1.330274))));
            return z > 0 ? 1 - prob : prob;
        }

        // Funci√≥n para calcular la distribuci√≥n t acumulada (aproximaci√≥n)
        function tCDF(t, df) {
            // Aproximaci√≥n usando la normal para df grandes
            if (df > 30) {
                return normalCDF(t);
            }
            
            // Para df peque√±os, usar aproximaci√≥n
            const x = df / (df + t * t);
            const a = df / 2;
            const b = 0.5;
            
            // Aproximaci√≥n Beta incompleta simplificada
            if (t < 0) {
                return 0.5 * Math.pow(x, a);
            } else {
                return 1 - 0.5 * Math.pow(x, a);
            }
        }

        // Obtener valor cr√≠tico Z
        function getZCritical(alpha, tipo) {
            const valores = {
                '0.01': { bilateral: 2.576, derecha: 2.326, izquierda: -2.326 },
                '0.05': { bilateral: 1.96, derecha: 1.645, izquierda: -1.645 },
                '0.10': { bilateral: 1.645, derecha: 1.282, izquierda: -1.282 }
            };
            return valores[alpha][tipo];
        }

        // Obtener valor cr√≠tico t (aproximado)
        function getTCritical(alpha, df, tipo) {
            // Tabla simplificada de valores cr√≠ticos t
            const tablaT = {
                10: { '0.01': { bilateral: 3.169, derecha: 2.764, izquierda: -2.764 },
                      '0.05': { bilateral: 2.228, derecha: 1.812, izquierda: -1.812 },
                      '0.10': { bilateral: 1.812, derecha: 1.372, izquierda: -1.372 }},
                20: { '0.01': { bilateral: 2.845, derecha: 2.528, izquierda: -2.528 },
                      '0.05': { bilateral: 2.086, derecha: 1.725, izquierda: -1.725 },
                      '0.10': { bilateral: 1.725, derecha: 1.325, izquierda: -1.325 }},
                24: { '0.01': { bilateral: 2.797, derecha: 2.492, izquierda: -2.492 },
                      '0.05': { bilateral: 2.064, derecha: 1.711, izquierda: -1.711 },
                      '0.10': { bilateral: 1.711, derecha: 1.318, izquierda: -1.318 }},
                30: { '0.01': { bilateral: 2.750, derecha: 2.457, izquierda: -2.457 },
                      '0.05': { bilateral: 2.042, derecha: 1.697, izquierda: -1.697 },
                      '0.10': { bilateral: 1.697, derecha: 1.310, izquierda: -1.310 }},
                35: { '0.01': { bilateral: 2.724, derecha: 2.438, izquierda: -2.438 },
                      '0.05': { bilateral: 2.030, derecha: 1.690, izquierda: -1.690 },
                      '0.10': { bilateral: 1.690, derecha: 1.306, izquierda: -1.306 }}
            };
            
            // Encontrar el df m√°s cercano
            let dfCercano = 30;
            let minDiff = Math.abs(df - 30);
            for (let d of [10, 20, 24, 30, 35]) {
                if (Math.abs(df - d) < minDiff) {
                    minDiff = Math.abs(df - d);
                    dfCercano = d;
                }
            }
            
            if (df > 35) {
                return getZCritical(alpha, tipo);
            }
            
            return tablaT[dfCercano][alpha][tipo];
        }

        // Calcular prueba de media
        function calcularPruebaMedia() {
            const tipoP = document.querySelector('input[name="tipo-prueba-media"]:checked').value;
            const xBarra = parseFloat(document.getElementById('media-muestral').value);
            const n = parseInt(document.getElementById('n-media').value);
            const mu0 = parseFloat(document.getElementById('mu0').value);
            const alpha = parseFloat(document.getElementById('alpha-media').value);
            const tipoCola = document.getElementById('tipo-cola-media').value;
            
            let estadistico, errorEst, pValor, valorCritico;
            let nombreEstadistico = '';
            let df = 0;
            
            if (tipoP === 'z') {
                const sigma = parseFloat(document.getElementById('sigma-poblacional').value);
                errorEst = sigma / Math.sqrt(n);
                estadistico = (xBarra - mu0) / errorEst;
                nombreEstadistico = 'Z';
                
                // Calcular p-valor
                if (tipoCola === 'bilateral') {
                    pValor = 2 * (1 - normalCDF(Math.abs(estadistico)));
                    valorCritico = getZCritical(alpha.toString(), 'bilateral');
                } else if (tipoCola === 'derecha') {
                    pValor = 1 - normalCDF(estadistico);
                    valorCritico = getZCritical(alpha.toString(), 'derecha');
                } else {
                    pValor = normalCDF(estadistico);
                    valorCritico = getZCritical(alpha.toString(), 'izquierda');
                }
            } else {
                const s = parseFloat(document.getElementById('s-muestral').value);
                errorEst = s / Math.sqrt(n);
                estadistico = (xBarra - mu0) / errorEst;
                nombreEstadistico = 't';
                df = n - 1;
                
                // Calcular p-valor (aproximado)
                if (tipoCola === 'bilateral') {
                    pValor = 2 * (1 - tCDF(Math.abs(estadistico), df));
                    valorCritico = getTCritical(alpha.toString(), df, 'bilateral');
                } else if (tipoCola === 'derecha') {
                    pValor = 1 - tCDF(estadistico, df);
                    valorCritico = getTCritical(alpha.toString(), df, 'derecha');
                } else {
                    pValor = tCDF(estadistico, df);
                    valorCritico = getTCritical(alpha.toString(), df, 'izquierda');
                }
            }
            
            // Decisi√≥n
            let decision = '';
            let conclusionClass = '';
            if (pValor < alpha) {
                decision = 'Rechazar H‚ÇÄ';
                conclusionClass = 'reject';
            } else {
                decision = 'No rechazar H‚ÇÄ';
                conclusionClass = 'no-reject';
            }
            
            // Mostrar resultados
            let html = '<h4>Hip√≥tesis</h4>';
            html += '<div class="hypothesis-display">';
            if (tipoCola === 'bilateral') {
                html += `$$H_0: \\mu = ${mu0}$$`;
                html += `$$H_1: \\mu \\neq ${mu0}$$`;
            } else if (tipoCola === 'derecha') {
                html += `$$H_0: \\mu \\leq ${mu0}$$`;
                html += `$$H_1: \\mu > ${mu0}$$`;
            } else {
                html += `$$H_0: \\mu \\geq ${mu0}$$`;
                html += `$$H_1: \\mu < ${mu0}$$`;
            }
            html += '</div>';
            
            html += '<h4>Estad√≠sticos</h4>';
            html += `<p><strong>Media muestral:</strong> \\(\\bar{x} = ${xBarra}\\)</p>`;
            html += `<p><strong>Error est√°ndar:</strong> \\(SE = ${errorEst.toFixed(4)}\\)</p>`;
            html += `<p><strong>${nombreEstadistico} calculado:</strong> \\(${nombreEstadistico} = ${estadistico.toFixed(4)}\\)</p>`;
            if (tipoP === 't') {
                html += `<p><strong>Grados de libertad:</strong> \\(df = ${df}\\)</p>`;
            }
            html += `<p><strong>Valor cr√≠tico:</strong> \\(${nombreEstadistico}_{cr√≠tico} = ${typeof valorCritico === 'number' ? valorCritico.toFixed(4) : '¬±' + valorCritico.toFixed(4)}\\)</p>`;
            html += `<p><strong>p-valor:</strong> ${pValor.toFixed(4)}</p>`;
            html += `<p><strong>Œ±:</strong> ${alpha}</p>`;
            
            html += `<div class="conclusion ${conclusionClass}">`;
            html += `<strong>Decisi√≥n:</strong> ${decision}<br>`;
            html += `<strong>Raz√≥n:</strong> p-valor (${pValor.toFixed(4)}) ${pValor < alpha ? '<' : '‚â•'} Œ± (${alpha})`;
            html += '</div>';
            
            document.getElementById('resultados-media').innerHTML = html;
            
            // Mostrar pasos detallados
            let pasosHTML = '';
            pasosHTML += '<div class="step-by-step">';
            pasosHTML += '<h4>Paso 1: Hip√≥tesis</h4>';
            pasosHTML += '<p>Se plantean las hip√≥tesis nula y alternativa seg√∫n el problema.</p>';
            pasosHTML += '</div>';
            
            pasosHTML += '<div class="step-by-step">';
            pasosHTML += '<h4>Paso 2: C√°lculo del estad√≠stico</h4>';
            if (tipoP === 'z') {
                pasosHTML += `<p>$$${nombreEstadistico} = \\frac{\\bar{x} - \\mu_0}{\\sigma / \\sqrt{n}} = \\frac{${xBarra} - ${mu0}}{${(errorEst * Math.sqrt(n)).toFixed(2)} / \\sqrt{${n}}} = ${estadistico.toFixed(4)}$$</p>`;
            } else {
                pasosHTML += `<p>$$${nombreEstadistico} = \\frac{\\bar{x} - \\mu_0}{s / \\sqrt{n}} = \\frac{${xBarra} - ${mu0}}{${(errorEst * Math.sqrt(n)).toFixed(2)} / \\sqrt{${n}}} = ${estadistico.toFixed(4)}$$</p>`;
            }
            pasosHTML += '</div>';
            
            pasosHTML += '<div class="step-by-step">';
            pasosHTML += '<h4>Paso 3: Valor cr√≠tico y regi√≥n de rechazo</h4>';
            if (tipoCola === 'bilateral') {
                pasosHTML += `<p>Regi√≥n de rechazo: \\(${nombreEstadistico} < ${-Math.abs(valorCritico).toFixed(4)}\\) o \\(${nombreEstadistico} > ${Math.abs(valorCritico).toFixed(4)}\\)</p>`;
            } else if (tipoCola === 'derecha') {
                pasosHTML += `<p>Regi√≥n de rechazo: \\(${nombreEstadistico} > ${valorCritico.toFixed(4)}\\)</p>`;
            } else {
                pasosHTML += `<p>Regi√≥n de rechazo: \\(${nombreEstadistico} < ${valorCritico.toFixed(4)}\\)</p>`;
            }
            pasosHTML += '</div>';
            
            pasosHTML += '<div class="step-by-step">';
            pasosHTML += '<h4>Paso 4: Decisi√≥n</h4>';
            pasosHTML += `<p>Como el p-valor (${pValor.toFixed(4)}) es ${pValor < alpha ? 'menor' : 'mayor o igual'} que Œ± (${alpha}), `;
            pasosHTML += `${pValor < alpha ? '<strong>rechazamos</strong>' : '<strong>no rechazamos</strong>'} la hip√≥tesis nula.</p>`;
            pasosHTML += '</div>';
            
            document.getElementById('pasos-media').style.display = 'block';
            document.getElementById('pasos-contenido-media').innerHTML = pasosHTML;
            
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }

        // Calcular prueba de proporci√≥n
        function calcularPruebaProporcion() {
            const x = parseInt(document.getElementById('x-exitos').value);
            const n = parseInt(document.getElementById('n-proporcion').value);
            const p0 = parseFloat(document.getElementById('p0').value);
            const alpha = parseFloat(document.getElementById('alpha-proporcion').value);
            const tipoCola = document.getElementById('tipo-cola-proporcion').value;
            
            const pHat = x / n;
            const errorEst = Math.sqrt(p0 * (1 - p0) / n);
            const z = (pHat - p0) / errorEst;
            
            // Calcular p-valor
            let pValor;
            let valorCritico;
            
            if (tipoCola === 'bilateral') {
                pValor = 2 * (1 - normalCDF(Math.abs(z)));
                valorCritico = getZCritical(alpha.toString(), 'bilateral');
            } else if (tipoCola === 'derecha') {
                pValor = 1 - normalCDF(z);
                valorCritico = getZCritical(alpha.toString(), 'derecha');
            } else {
                pValor = normalCDF(z);
                valorCritico = getZCritical(alpha.toString(), 'izquierda');
            }
            
            // Decisi√≥n
            let decision = '';
            let conclusionClass = '';
            if (pValor < alpha) {
                decision = 'Rechazar H‚ÇÄ';
                conclusionClass = 'reject';
            } else {
                decision = 'No rechazar H‚ÇÄ';
                conclusionClass = 'no-reject';
            }
            
            // Mostrar resultados
            let html = '<h4>Hip√≥tesis</h4>';
            html += '<div class="hypothesis-display">';
            if (tipoCola === 'bilateral') {
                html += `$$H_0: p = ${p0}$$`;
                html += `$$H_1: p \\neq ${p0}$$`;
            } else if (tipoCola === 'derecha') {
                html += `$$H_0: p \\leq ${p0}$$`;
                html += `$$H_1: p > ${p0}$$`;
            } else {
                html += `$$H_0: p \\geq ${p0}$$`;
                html += `$$H_1: p < ${p0}$$`;
            }
            html += '</div>';
            
            html += '<h4>Estad√≠sticos</h4>';
            html += `<p><strong>Proporci√≥n muestral:</strong> \\(\\hat{p} = \\frac{${x}}{${n}} = ${pHat.toFixed(4)}\\)</p>`;
            html += `<p><strong>Error est√°ndar:</strong> \\(SE = ${errorEst.toFixed(4)}\\)</p>`;
            html += `<p><strong>Z calculado:</strong> \\(Z = ${z.toFixed(4)}\\)</p>`;
            html += `<p><strong>Valor cr√≠tico:</strong> \\(Z_{cr√≠tico} = ${typeof valorCritico === 'number' ? valorCritico.toFixed(4) : '¬±' + valorCritico.toFixed(4)}\\)</p>`;
            html += `<p><strong>p-valor:</strong> ${pValor.toFixed(4)}</p>`;
            html += `<p><strong>Œ±:</strong> ${alpha}</p>`;
            
            html += `<div class="conclusion ${conclusionClass}">`;
            html += `<strong>Decisi√≥n:</strong> ${decision}<br>`;
            html += `<strong>Raz√≥n:</strong> p-valor (${pValor.toFixed(4)}) ${pValor < alpha ? '<' : '‚â•'} Œ± (${alpha})`;
            html += '</div>';
            
            document.getElementById('resultados-proporcion').innerHTML = html;
            
            // Mostrar pasos detallados
            let pasosHTML = '';
            pasosHTML += '<div class="step-by-step">';
            pasosHTML += '<h4>Paso 1: Calcular la proporci√≥n muestral</h4>';
            pasosHTML += `<p>$$\\hat{p} = \\frac{x}{n} = \\frac{${x}}{${n}} = ${pHat.toFixed(4)}$$</p>`;
            pasosHTML += '</div>';
            
            pasosHTML += '<div class="step-by-step">';
            pasosHTML += '<h4>Paso 2: Calcular el estad√≠stico Z</h4>';
            pasosHTML += `<p>$$Z = \\frac{\\hat{p} - p_0}{\\sqrt{\\frac{p_0(1-p_0)}{n}}} = \\frac{${pHat.toFixed(4)} - ${p0}}{\\sqrt{\\frac{${p0}(${1-p0})}{${n}}}} = ${z.toFixed(4)}$$</p>`;
            pasosHTML += '</div>';
            
            pasosHTML += '<div class="step-by-step">';
            pasosHTML += '<h4>Paso 3: Comparar con valor cr√≠tico</h4>';
            if (tipoCola === 'bilateral') {
                pasosHTML += `<p>Regi√≥n de rechazo: \\(Z < ${-Math.abs(valorCritico).toFixed(4)}\\) o \\(Z > ${Math.abs(valorCritico).toFixed(4)}\\)</p>`;
            } else if (tipoCola === 'derecha') {
                pasosHTML += `<p>Regi√≥n de rechazo: \\(Z > ${valorCritico.toFixed(4)}\\)</p>`;
            } else {
                pasosHTML += `<p>Regi√≥n de rechazo: \\(Z < ${valorCritico.toFixed(4)}\\)</p>`;
            }
            pasosHTML += '</div>';
            
            pasosHTML += '<div class="step-by-step">';
            pasosHTML += '<h4>Paso 4: Conclusi√≥n</h4>';
            pasosHTML += `<p>El p-valor es ${pValor.toFixed(4)}, que es ${pValor < alpha ? 'menor' : 'mayor'} que Œ± = ${alpha}.</p>`;
            pasosHTML += `<p>Por lo tanto, ${pValor < alpha ? '<strong>rechazamos</strong>' : '<strong>no rechazamos</strong>'} H‚ÇÄ.</p>`;
            pasosHTML += '</div>';
            
            document.getElementById('pasos-proporcion').style.display = 'block';
            document.getElementById('pasos-contenido-proporcion').innerHTML = pasosHTML;
            
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }

        // Cargar ejemplos de media
        function cargarEjemploMedia(num) {
            if (num === 1) {
                document.querySelector('input[name="tipo-prueba-media"][value="z"]').checked = true;
                actualizarFormularioMedia();
                document.getElementById('media-muestral').value = 497;
                document.getElementById('sigma-poblacional').value = 10;
                document.getElementById('n-media').value = 36;
                document.getElementById('mu0').value = 500;
                document.getElementById('alpha-media').value = '0.05';
                document.getElementById('tipo-cola-media').value = 'bilateral';
            } else if (num === 2) {
                document.querySelector('input[name="tipo-prueba-media"][value="t"]').checked = true;
                actualizarFormularioMedia();
                document.getElementById('media-muestral').value = 38.5;
                document.getElementById('s-muestral').value = 4.2;
                document.getElementById('n-media').value = 25;
                document.getElementById('mu0').value = 40;
                document.getElementById('alpha-media').value = '0.05';
                document.getElementById('tipo-cola-media').value = 'izquierda';
            } else if (num === 3) {
                document.querySelector('input[name="tipo-prueba-media"][value="z"]').checked = true;
                actualizarFormularioMedia();
                document.getElementById('media-muestral').value = 105;
                document.getElementById('sigma-poblacional').value = 15;
                document.getElementById('n-media').value = 50;
                document.getElementById('mu0').value = 100;
                document.getElementById('alpha-media').value = '0.01';
                document.getElementById('tipo-cola-media').value = 'derecha';
            }
        }

        // Cargar ejemplos de proporci√≥n
        function cargarEjemploProporcion(num) {
            if (num === 1) {
                document.getElementById('x-exitos').value = 108;
                document.getElementById('n-proporcion').value = 200;
                document.getElementById('p0').value = 0.60;
                document.getElementById('alpha-proporcion').value = '0.01';
                document.getElementById('tipo-cola-proporcion').value = 'bilateral';
            } else if (num === 2) {
                document.getElementById('x-exitos').value = 75;
                document.getElementById('n-proporcion').value = 100;
                document.getElementById('p0').value = 0.70;
                document.getElementById('alpha-proporcion').value = '0.05';
                document.getElementById('tipo-cola-proporcion').value = 'derecha';
            } else if (num === 3) {
                document.getElementById('x-exitos').value = 42;
                document.getElementById('n-proporcion').value = 150;
                document.getElementById('p0').value = 0.35;
                document.getElementById('alpha-proporcion').value = '0.05';
                document.getElementById('tipo-cola-proporcion').value = 'izquierda';
            }
        }

        // ============================================
        // FUNCIONES PARA PRUEBA DE VARIANZA
        // ============================================

        // Funci√≥n CDF Chi-cuadrado (aproximaci√≥n)
        function chiSquareCDF(x, df) {
            if (x <= 0) return 0;
            if (df <= 0) return 0;
            
            // Aproximaci√≥n usando funci√≥n Gamma incompleta
            // Para df grande, usar aproximaci√≥n normal
            if (df > 30) {
                const z = Math.sqrt(2 * x) - Math.sqrt(2 * df - 1);
                return normalCDF(z);
            }
            
            // Para df peque√±o, usar aproximaci√≥n simple
            const k = df / 2;
            const term = Math.pow(x / 2, k) * Math.exp(-x / 2);
            
            // Aproximaci√≥n de la funci√≥n Gamma
            let sum = 0;
            let factorial = 1;
            for (let i = 0; i < 50; i++) {
                sum += Math.pow(x / 2, i) / factorial;
                factorial *= (i + 1);
            }
            
            return 1 - term * sum / gamma(k);
        }

        // Funci√≥n Gamma (aproximaci√≥n de Stirling)
        function gamma(z) {
            if (z < 0.5) return Math.PI / (Math.sin(Math.PI * z) * gamma(1 - z));
            z -= 1;
            const g = 7;
            const coef = [
                0.99999999999980993, 676.5203681218851, -1259.1392167224028,
                771.32342877765313, -176.61502916214059, 12.507343278686905,
                -0.13857109526572012, 9.9843695780195716e-6, 1.5056327351493116e-7
            ];
            
            let x = coef[0];
            for (let i = 1; i < g + 2; i++) {
                x += coef[i] / (z + i);
            }
            
            const t = z + g + 0.5;
            return Math.sqrt(2 * Math.PI) * Math.pow(t, z + 0.5) * Math.exp(-t) * x;
        }

        // Obtener valores cr√≠ticos Chi-cuadrado (aproximados)
        function getChiSquareCritical(alpha, df, tipo) {
            // Tabla simplificada de valores cr√≠ticos chi-cuadrado
            const tabla = {
                10: { '0.01': { inf: 2.558, sup: 23.209 }, '0.05': { inf: 3.940, sup: 18.307 }, '0.10': { inf: 4.865, sup: 15.987 } },
                15: { '0.01': { inf: 5.229, sup: 30.578 }, '0.05': { inf: 7.261, sup: 24.996 }, '0.10': { inf: 8.547, sup: 22.307 } },
                20: { '0.01': { inf: 8.260, sup: 37.566 }, '0.05': { inf: 10.851, sup: 31.410 }, '0.10': { inf: 12.443, sup: 28.412 } },
                24: { '0.01': { inf: 10.856, sup: 42.980 }, '0.05': { inf: 13.848, sup: 36.415 }, '0.10': { inf: 15.659, sup: 33.196 } },
                30: { '0.01': { inf: 14.953, sup: 50.892 }, '0.05': { inf: 18.493, sup: 43.773 }, '0.10': { inf: 20.599, sup: 40.256 } }
            };
            
            // Encontrar df m√°s cercano
            let dfCercano = 20;
            let minDiff = Math.abs(df - 20);
            for (let d of [10, 15, 20, 24, 30]) {
                if (Math.abs(df - d) < minDiff) {
                    minDiff = Math.abs(df - d);
                    dfCercano = d;
                }
            }
            
            if (df > 30) {
                // Aproximaci√≥n para df grande
                if (tipo === 'inf') {
                    const z = alpha === '0.01' ? -2.326 : (alpha === '0.05' ? -1.645 : -1.282);
                    return df + z * Math.sqrt(2 * df);
                } else {
                    const z = alpha === '0.01' ? 2.326 : (alpha === '0.05' ? 1.645 : 1.282);
                    return df + z * Math.sqrt(2 * df);
                }
            }
            
            return tabla[dfCercano][alpha][tipo];
        }

        // Calcular prueba de varianza
        function calcularPruebaVarianza() {
            const s2 = parseFloat(document.getElementById('varianza-muestral').value);
            const n = parseInt(document.getElementById('n-varianza').value);
            const sigma02 = parseFloat(document.getElementById('sigma0-cuadrado').value);
            const alpha = parseFloat(document.getElementById('alpha-varianza').value);
            const tipo = document.getElementById('tipo-cola-varianza').value;
            
            // Calcular estad√≠stico Chi-cuadrado
            const chiCuadrado = ((n - 1) * s2) / sigma02;
            const df = n - 1;
            
            // Calcular p-valor (aproximado)
            let pValor;
            if (tipo === 'bilateral') {
                const pIzq = chiSquareCDF(chiCuadrado, df);
                const pDer = 1 - chiSquareCDF(chiCuadrado, df);
                pValor = 2 * Math.min(pIzq, pDer);
            } else if (tipo === 'derecha') {
                pValor = 1 - chiSquareCDF(chiCuadrado, df);
            } else {
                pValor = chiSquareCDF(chiCuadrado, df);
            }
            
            const decision = pValor < alpha;
            
            // Obtener valores cr√≠ticos
            let valorCriticoInf, valorCriticoSup;
            if (tipo === 'bilateral') {
                valorCriticoInf = getChiSquareCritical(String(alpha/2), df, 'inf');
                valorCriticoSup = getChiSquareCritical(String(alpha/2), df, 'sup');
            } else if (tipo === 'derecha') {
                valorCriticoSup = getChiSquareCritical(alpha.toString(), df, 'sup');
            } else {
                valorCriticoInf = getChiSquareCritical(alpha.toString(), df, 'inf');
            }
            
            let html = '<div class="result-box">';
            html += '<h4>Hip√≥tesis</h4>';
            html += '<div class="hypothesis-display">';
            if (tipo === 'bilateral') {
                html += `$$H_0: \\sigma^2 = ${sigma02}$$`;
                html += `$$H_1: \\sigma^2 \\neq ${sigma02}$$`;
            } else if (tipo === 'derecha') {
                html += `$$H_0: \\sigma^2 \\leq ${sigma02}$$`;
                html += `$$H_1: \\sigma^2 > ${sigma02}$$`;
            } else {
                html += `$$H_0: \\sigma^2 \\geq ${sigma02}$$`;
                html += `$$H_1: \\sigma^2 < ${sigma02}$$`;
            }
            html += '</div>';
            
            html += '<div class="stat-display">';
            html += `<div class="stat-item"><div class="label">Varianza muestral</div><div class="value">${s2.toFixed(2)}</div></div>`;
            html += `<div class="stat-item"><div class="label">Varianza H‚ÇÄ</div><div class="value">${sigma02.toFixed(2)}</div></div>`;
            html += `<div class="stat-item"><div class="label">œá¬≤ calculado</div><div class="value">${chiCuadrado.toFixed(4)}</div></div>`;
            html += `<div class="stat-item"><div class="label">gl</div><div class="value">${df}</div></div>`;
            html += `<div class="stat-item"><div class="label">p-valor</div><div class="value">${pValor.toFixed(4)}</div></div>`;
            html += '</div>';
            
            html += `<div class="conclusion ${decision ? 'reject' : 'no-reject'}">`;
            html += `<strong>Decisi√≥n:</strong> ${decision ? 'Rechazar H‚ÇÄ' : 'No rechazar H‚ÇÄ'}<br>`;
            if (decision) {
                html += `<strong>Conclusi√≥n:</strong> Hay evidencia estad√≠stica significativa de que la varianza poblacional es diferente de ${sigma02}.`;
                html += `<br>Desviaci√≥n est√°ndar muestral: œÉ = ${Math.sqrt(s2).toFixed(2)}`;
            } else {
                html += `<strong>Conclusi√≥n:</strong> No hay evidencia suficiente para afirmar que la varianza poblacional difiere de ${sigma02}.`;
            }
            html += '</div>';
            
            html += '<div class="formula-box" style="margin-top: 15px;">';
            html += '<h4>C√°lculos Detallados:</h4>';
            html += `<p>Estad√≠stico Chi-cuadrado:</p>`;
            html += `$$\\chi^2 = \\frac{(n-1)s^2}{\\sigma_0^2} = \\frac{(${n}-1) \\times ${s2}}{${sigma02}} = ${chiCuadrado.toFixed(4)}$$`;
            html += `<p>Grados de libertad: df = ${n} - 1 = ${df}</p>`;
            
            if (tipo === 'bilateral') {
                html += `<p>Regi√≥n cr√≠tica: œá¬≤ < ${valorCriticoInf.toFixed(3)} o œá¬≤ > ${valorCriticoSup.toFixed(3)}</p>`;
            } else if (tipo === 'derecha') {
                html += `<p>Regi√≥n cr√≠tica: œá¬≤ > ${valorCriticoSup.toFixed(3)}</p>`;
            } else {
                html += `<p>Regi√≥n cr√≠tica: œá¬≤ < ${valorCriticoInf.toFixed(3)}</p>`;
            }
            html += '</div>';
            
            html += '</div>';
            
            document.getElementById('resultados-varianza').innerHTML = html;
            
            // Pasos detallados
            let pasosHTML = '';
            pasosHTML += '<div class="step-by-step">';
            pasosHTML += '<h4>Paso 1: Verificar supuestos</h4>';
            pasosHTML += '<p>La prueba Chi-cuadrado requiere que la poblaci√≥n sea normal. Verifique este supuesto antes de continuar.</p>';
            pasosHTML += '</div>';
            
            pasosHTML += '<div class="step-by-step">';
            pasosHTML += '<h4>Paso 2: Calcular el estad√≠stico</h4>';
            pasosHTML += `<p>$$\\chi^2 = \\frac{(${n}-1) \\times ${s2}}{${sigma02}} = ${chiCuadrado.toFixed(4)}$$</p>`;
            pasosHTML += '</div>';
            
            pasosHTML += '<div class="step-by-step">';
            pasosHTML += '<h4>Paso 3: Determinar regi√≥n cr√≠tica</h4>';
            pasosHTML += `<p>Con Œ± = ${alpha} y df = ${df}</p>`;
            if (tipo === 'bilateral') {
                pasosHTML += `<p>La regi√≥n de rechazo es: œá¬≤ < ${valorCriticoInf.toFixed(3)} o œá¬≤ > ${valorCriticoSup.toFixed(3)}</p>`;
            }
            pasosHTML += '</div>';
            
            pasosHTML += '<div class="step-by-step">';
            pasosHTML += '<h4>Paso 4: Decisi√≥n</h4>';
            pasosHTML += `<p>p-valor = ${pValor.toFixed(4)} ${pValor < alpha ? '<' : '‚â•'} Œ± = ${alpha}</p>`;
            pasosHTML += `<p>${decision ? 'Rechazamos H‚ÇÄ' : 'No rechazamos H‚ÇÄ'}</p>`;
            pasosHTML += '</div>';
            
            document.getElementById('pasos-varianza').style.display = 'block';
            document.getElementById('pasos-contenido-varianza').innerHTML = pasosHTML;
            
            if (window.MathJax) MathJax.typesetPromise();
        }

        // Cargar ejemplos de varianza
        function cargarEjemploVarianza(num) {
            if (num === 1) {
                document.getElementById('varianza-muestral').value = 120;
                document.getElementById('n-varianza').value = 25;
                document.getElementById('sigma0-cuadrado').value = 100;
                document.getElementById('alpha-varianza').value = '0.05';
                document.getElementById('tipo-cola-varianza').value = 'bilateral';
            } else if (num === 2) {
                document.getElementById('varianza-muestral').value = 225;
                document.getElementById('n-varianza').value = 20;
                document.getElementById('sigma0-cuadrado').value = 200;
                document.getElementById('alpha-varianza').value = '0.05';
                document.getElementById('tipo-cola-varianza').value = 'derecha';
            }
        }

        // Variables para el gr√°fico
        let graficoDistribucion = null;

        // Actualizar visualizaci√≥n seg√∫n tipo de distribuci√≥n
        document.getElementById('tipo-dist-visual').addEventListener('change', function() {
            if (this.value === 't') {
                document.getElementById('grupo-gl').style.display = 'block';
            } else {
                document.getElementById('grupo-gl').style.display = 'none';
            }
        });

        // Generar visualizaci√≥n
        function generarVisualizacion() {
            const tipoDist = document.getElementById('tipo-dist-visual').value;
            const estadistico = parseFloat(document.getElementById('estadistico-visual').value);
            const alpha = parseFloat(document.getElementById('alpha-visual').value);
            const tipoPrueba = document.getElementById('tipo-prueba-visual').value;
            const gl = tipoDist === 't' ? parseInt(document.getElementById('gl-visual').value) : 0;
            
            // Generar datos para la distribuci√≥n
            const etiquetas = [];
            const puntosDistribucion = [];
            const puntosRegionCritica = [];
            
            const min = -4;
            const max = 4;
            const paso = 0.05;
            
            // Calcular valores cr√≠ticos
            let valorCritico;
            if (tipoDist === 'normal') {
                valorCritico = getZCritical(alpha.toString(), tipoPrueba);
            } else {
                valorCritico = getTCritical(alpha.toString(), gl, tipoPrueba);
            }
            
            // Funci√≥n para calcular densidad
            function calcularDensidad(x) {
                if (tipoDist === 'normal') {
                    return (1 / Math.sqrt(2 * Math.PI)) * Math.exp(-0.5 * x * x);
                } else {
                    const term1 = Math.pow(1 + (x * x) / gl, -(gl + 1) / 2);
                    return term1 / Math.sqrt(gl * Math.PI);
                }
            }
            
            for (let x = min; x <= max; x += paso) {
                etiquetas.push(x.toFixed(2));
                const y = calcularDensidad(x);
                puntosDistribucion.push(y);
                
                // Determinar si est√° en regi√≥n cr√≠tica
                let enRegionCritica = false;
                if (tipoPrueba === 'bilateral') {
                    enRegionCritica = x <= -Math.abs(valorCritico) || x >= Math.abs(valorCritico);
                } else if (tipoPrueba === 'derecha') {
                    enRegionCritica = x >= valorCritico;
                } else {
                    enRegionCritica = x <= valorCritico;
                }
                
                puntosRegionCritica.push(enRegionCritica ? y : null);
            }
            
            // Destruir gr√°fico anterior si existe
            if (graficoDistribucion) {
                graficoDistribucion.destroy();
            }
            
            // Crear datasets
            const datasets = [
                {
                    label: tipoDist === 'normal' ? 'Distribuci√≥n Normal Est√°ndar' : `Distribuci√≥n t (df=${gl})`,
                    data: puntosDistribucion,
                    borderColor: 'rgba(52, 152, 219, 1)',
                    backgroundColor: 'rgba(52, 152, 219, 0.2)',
                    fill: true,
                    pointRadius: 0,
                    borderWidth: 2,
                    order: 2
                },
                {
                    label: 'Regi√≥n Cr√≠tica (Rechazo de H‚ÇÄ)',
                    data: puntosRegionCritica,
                    borderColor: 'rgba(231, 76, 60, 0)',
                    backgroundColor: 'rgba(231, 76, 60, 0.6)',
                    fill: true,
                    pointRadius: 0,
                    borderWidth: 0,
                    order: 1
                }
            ];
            
            // Crear nuevo gr√°fico
            const ctx = document.getElementById('grafico-distribucion').getContext('2d');
            graficoDistribucion = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: etiquetas,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        title: {
                            display: true,
                            text: 'Distribuci√≥n del Estad√≠stico de Prueba - Regiones Cr√≠ticas',
                            font: { size: 16, weight: 'bold' }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Valor del estad√≠stico',
                                font: { size: 14 }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Densidad de probabilidad',
                                font: { size: 14 }
                            }
                        }
                    }
                }
            });
            
            // Agregar l√≠neas verticales para valores cr√≠ticos y estad√≠stico
            const ctxCanvas = ctx.canvas;
            const chartArea = graficoDistribucion.chartArea;
            
            // Funci√≥n para dibujar l√≠nea vertical
            function dibujarLineaVertical(valor, color, label) {
                const xPixel = graficoDistribucion.scales.x.getPixelForValue(valor.toFixed(2));
                ctx.save();
                ctx.strokeStyle = color;
                ctx.lineWidth = 3;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(xPixel, chartArea.top);
                ctx.lineTo(xPixel, chartArea.bottom);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // Etiqueta
                ctx.fillStyle = color;
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(label, xPixel, chartArea.top - 5);
                ctx.restore();
            }
            
            // Dibujar l√≠neas despu√©s de que el gr√°fico se renderice
            setTimeout(() => {
                if (tipoPrueba === 'bilateral') {
                    dibujarLineaVertical(-Math.abs(valorCritico), '#e74c3c', `Z = ${-Math.abs(valorCritico).toFixed(3)}`);
                    dibujarLineaVertical(Math.abs(valorCritico), '#e74c3c', `Z = ${Math.abs(valorCritico).toFixed(3)}`);
                } else if (tipoPrueba === 'derecha') {
                    dibujarLineaVertical(valorCritico, '#e74c3c', `Z = ${valorCritico.toFixed(3)}`);
                } else {
                    dibujarLineaVertical(valorCritico, '#e74c3c', `Z = ${valorCritico.toFixed(3)}`);
                }
                
                // L√≠nea para el estad√≠stico calculado
                dibujarLineaVertical(estadistico, '#9b59b6', `Estad√≠stico = ${estadistico.toFixed(3)}`);
            }, 100);
            
            // Calcular p-valor
            let pValor;
            if (tipoDist === 'normal') {
                if (tipoPrueba === 'bilateral') {
                    pValor = 2 * (1 - normalCDF(Math.abs(estadistico)));
                } else if (tipoPrueba === 'derecha') {
                    pValor = 1 - normalCDF(estadistico);
                } else {
                    pValor = normalCDF(estadistico);
                }
            } else {
                if (tipoPrueba === 'bilateral') {
                    pValor = 2 * (1 - tCDF(Math.abs(estadistico), gl));
                } else if (tipoPrueba === 'derecha') {
                    pValor = 1 - tCDF(estadistico, gl);
                } else {
                    pValor = tCDF(estadistico, gl);
                }
            }
            
            // Mostrar informaci√≥n
            let info = '<div class="result-box">';
            info += '<h4>Informaci√≥n de la Visualizaci√≥n</h4>';
            info += `<p><strong>Tipo de distribuci√≥n:</strong> ${tipoDist === 'normal' ? 'Normal est√°ndar (Z)' : 't-Student con ' + gl + ' grados de libertad'}</p>`;
            info += `<p><strong>Estad√≠stico calculado:</strong> ${estadistico.toFixed(4)}</p>`;
            info += `<p><strong>Nivel de significancia:</strong> Œ± = ${alpha}</p>`;
            info += `<p><strong>Tipo de prueba:</strong> ${tipoPrueba === 'bilateral' ? 'Bilateral' : (tipoPrueba === 'derecha' ? 'Unilateral derecha' : 'Unilateral izquierda')}</p>`;
            
            if (tipoPrueba === 'bilateral') {
                info += `<p><strong>Valores cr√≠ticos:</strong> ¬±${Math.abs(valorCritico).toFixed(4)}</p>`;
            } else {
                info += `<p><strong>Valor cr√≠tico:</strong> ${valorCritico.toFixed(4)}</p>`;
            }
            
            info += `<p><strong>p-valor:</strong> ${pValor.toFixed(4)}</p>`;
            
            const decision = pValor < alpha ? 'Rechazar H‚ÇÄ' : 'No rechazar H‚ÇÄ';
            const clase = pValor < alpha ? 'reject' : 'no-reject';
            
            info += `<div class="conclusion ${clase}">`;
            info += `<strong>Decisi√≥n:</strong> ${decision}`;
            info += '</div>';
            
            info += '<div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 5px;">';
            info += '<h4 style="color: #856404; margin-bottom: 10px;">üìä Interpretaci√≥n del Gr√°fico:</h4>';
            info += '<ul style="color: #856404;">';
            info += '<li><strong style="color: #e74c3c;">Regi√≥n ROJA (sombreada):</strong> Regi√≥n cr√≠tica donde se rechaza H‚ÇÄ</li>';
            info += '<li><strong style="color: #3498db;">Regi√≥n AZUL (clara):</strong> Regi√≥n de aceptaci√≥n donde NO se rechaza H‚ÇÄ</li>';
            info += '<li><strong style="color: #e74c3c;">L√≠neas ROJAS verticales punteadas:</strong> Valores cr√≠ticos que delimitan las regiones</li>';
            info += '<li><strong style="color: #9b59b6;">L√≠nea MORADA punteada:</strong> Valor del estad√≠stico calculado</li>';
            info += '</ul>';
            info += '</div>';
            info += '</div>';
            
            document.getElementById('info-visual').innerHTML = info;
            
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }

        // ============================================
        // FUNCIONES PARA DOS POBLACIONES
        // ============================================

        // Calcular dos medias independientes
        function calcularDosMedias() {
            const x1 = parseFloat(document.getElementById('x1-dos').value);
            const s1 = parseFloat(document.getElementById('s1-dos').value);
            const n1 = parseInt(document.getElementById('n1-dos').value);
            
            const x2 = parseFloat(document.getElementById('x2-dos').value);
            const s2 = parseFloat(document.getElementById('s2-dos').value);
            const n2 = parseInt(document.getElementById('n2-dos').value);
            
            const alpha = parseFloat(document.getElementById('alpha-dos-medias').value);
            const tipo = document.getElementById('tipo-dos-medias').value;
            
            // Calcular error est√°ndar
            const se = Math.sqrt((s1*s1)/n1 + (s2*s2)/n2);
            const t = (x1 - x2) / se;
            
            // Grados de libertad (Welch)
            const df = Math.floor(Math.pow((s1*s1/n1 + s2*s2/n2), 2) / 
                       ((s1*s1/n1)*(s1*s1/n1)/(n1-1) + (s2*s2/n2)*(s2*s2/n2)/(n2-1)));
            
            // Calcular p-valor
            let pValor;
            if (tipo === 'bilateral') {
                pValor = 2 * (1 - tCDF(Math.abs(t), df));
            } else if (tipo === 'mayor') {
                pValor = 1 - tCDF(t, df);
            } else {
                pValor = tCDF(t, df);
            }
            
            const decision = pValor < alpha;
            
            let html = '<div class="result-box">';
            html += '<h4>Hip√≥tesis</h4>';
            html += '<div class="hypothesis-display">';
            if (tipo === 'bilateral') {
                html += '$$H_0: \\mu_1 = \\mu_2$$';
                html += '$$H_1: \\mu_1 \\neq \\mu_2$$';
            } else if (tipo === 'mayor') {
                html += '$$H_0: \\mu_1 \\leq \\mu_2$$';
                html += '$$H_1: \\mu_1 > \\mu_2$$';
            } else {
                html += '$$H_0: \\mu_1 \\geq \\mu_2$$';
                html += '$$H_1: \\mu_1 < \\mu_2$$';
            }
            html += '</div>';
            
            html += '<div class="stat-display">';
            html += `<div class="stat-item"><div class="label">Muestra 1</div><div class="value">${x1.toFixed(2)}</div></div>`;
            html += `<div class="stat-item"><div class="label">Muestra 2</div><div class="value">${x2.toFixed(2)}</div></div>`;
            html += `<div class="stat-item"><div class="label">Diferencia</div><div class="value">${(x1-x2).toFixed(2)}</div></div>`;
            html += `<div class="stat-item"><div class="label">t calculado</div><div class="value">${t.toFixed(4)}</div></div>`;
            html += `<div class="stat-item"><div class="label">gl</div><div class="value">${df}</div></div>`;
            html += `<div class="stat-item"><div class="label">p-valor</div><div class="value">${pValor.toFixed(4)}</div></div>`;
            html += '</div>';
            
            html += `<div class="conclusion ${decision ? 'reject' : 'no-reject'}">`;
            html += `<strong>Decisi√≥n:</strong> ${decision ? 'Rechazar H‚ÇÄ' : 'No rechazar H‚ÇÄ'}<br>`;
            if (decision) {
                html += `<strong>Conclusi√≥n:</strong> Existe evidencia estad√≠stica significativa de diferencia entre las dos poblaciones.`;
                html += `<br>La diferencia promedio es de ${Math.abs(x1-x2).toFixed(2)} unidades.`;
            } else {
                html += `<strong>Conclusi√≥n:</strong> No hay evidencia suficiente de diferencia significativa entre las poblaciones.`;
            }
            html += '</div>';
            
            html += '<div class="formula-box" style="margin-top: 15px;">';
            html += '<h4>C√°lculos Detallados:</h4>';
            html += `<p>Error est√°ndar: $$SE = \\sqrt{\\frac{s_1^2}{n_1} + \\frac{s_2^2}{n_2}} = ${se.toFixed(4)}$$</p>`;
            html += `<p>Estad√≠stico t: $$t = \\frac{\\bar{x}_1 - \\bar{x}_2}{SE} = \\frac{${x1} - ${x2}}{${se.toFixed(4)}} = ${t.toFixed(4)}$$</p>`;
            html += `<p>Grados de libertad (Welch): ${df}</p>`;
            html += '</div>';
            
            html += '</div>';
            
            document.getElementById('resultados-dos-medias').innerHTML = html;
            if (window.MathJax) MathJax.typesetPromise();
        }

        // Calcular dos proporciones
        function calcularDosProporciones() {
            const x1 = parseInt(document.getElementById('x1-prop').value);
            const n1 = parseInt(document.getElementById('n1-prop').value);
            const x2 = parseInt(document.getElementById('x2-prop').value);
            const n2 = parseInt(document.getElementById('n2-prop').value);
            
            const alpha = parseFloat(document.getElementById('alpha-dos-prop').value);
            const tipo = document.getElementById('tipo-dos-prop').value;
            
            const p1 = x1 / n1;
            const p2 = x2 / n2;
            const pCombinada = (x1 + x2) / (n1 + n2);
            
            const se = Math.sqrt(pCombinada * (1 - pCombinada) * (1/n1 + 1/n2));
            const z = (p1 - p2) / se;
            
            // Calcular p-valor
            let pValor;
            if (tipo === 'bilateral') {
                pValor = 2 * (1 - normalCDF(Math.abs(z)));
            } else if (tipo === 'mayor') {
                pValor = 1 - normalCDF(z);
            } else {
                pValor = normalCDF(z);
            }
            
            const decision = pValor < alpha;
            
            let html = '<div class="result-box">';
            html += '<h4>Hip√≥tesis</h4>';
            html += '<div class="hypothesis-display">';
            if (tipo === 'bilateral') {
                html += '$$H_0: p_1 = p_2$$';
                html += '$$H_1: p_1 \\neq p_2$$';
            } else if (tipo === 'mayor') {
                html += '$$H_0: p_1 \\leq p_2$$';
                html += '$$H_1: p_1 > p_2$$';
            } else {
                html += '$$H_0: p_1 \\geq p_2$$';
                html += '$$H_1: p_1 < p_2$$';
            }
            html += '</div>';
            
            html += '<div class="stat-display">';
            html += `<div class="stat-item"><div class="label">Proporci√≥n 1</div><div class="value">${(p1*100).toFixed(2)}%</div></div>`;
            html += `<div class="stat-item"><div class="label">Proporci√≥n 2</div><div class="value">${(p2*100).toFixed(2)}%</div></div>`;
            html += `<div class="stat-item"><div class="label">Diferencia</div><div class="value">${((p1-p2)*100).toFixed(2)}%</div></div>`;
            html += `<div class="stat-item"><div class="label">Z calculado</div><div class="value">${z.toFixed(4)}</div></div>`;
            html += `<div class="stat-item"><div class="label">p-valor</div><div class="value">${pValor.toFixed(4)}</div></div>`;
            html += '</div>';
            
            html += `<div class="conclusion ${decision ? 'reject' : 'no-reject'}">`;
            html += `<strong>Decisi√≥n:</strong> ${decision ? 'Rechazar H‚ÇÄ' : 'No rechazar H‚ÇÄ'}<br>`;
            if (decision) {
                html += `<strong>Conclusi√≥n:</strong> Las proporciones son significativamente diferentes.`;
                html += `<br>Proporci√≥n 1: ${(p1*100).toFixed(2)}%, Proporci√≥n 2: ${(p2*100).toFixed(2)}%`;
            } else {
                html += `<strong>Conclusi√≥n:</strong> No hay evidencia de diferencia significativa entre las proporciones.`;
            }
            html += '</div>';
            
            html += '<div class="formula-box" style="margin-top: 15px;">';
            html += '<h4>C√°lculos:</h4>';
            html += `<p>Proporci√≥n combinada: $$\\hat{p} = \\frac{${x1} + ${x2}}{${n1} + ${n2}} = ${pCombinada.toFixed(4)}$$</p>`;
            html += `<p>Error est√°ndar: $$SE = \\sqrt{\\hat{p}(1-\\hat{p})(\\frac{1}{n_1} + \\frac{1}{n_2})} = ${se.toFixed(4)}$$</p>`;
            html += `<p>Estad√≠stico Z: $$Z = \\frac{${p1.toFixed(4)} - ${p2.toFixed(4)}}{${se.toFixed(4)}} = ${z.toFixed(4)}$$</p>`;
            html += '</div>';
            
            html += '</div>';
            
            document.getElementById('resultados-dos-prop').innerHTML = html;
            if (window.MathJax) MathJax.typesetPromise();
        }

        // Calcular prueba pareada
        function calcularPareada() {
            const dMedia = parseFloat(document.getElementById('d-media').value);
            const dStd = parseFloat(document.getElementById('d-std').value);
            const n = parseInt(document.getElementById('n-pareada').value);
            const mu0 = parseFloat(document.getElementById('mu0-pareada').value);
            
            const alpha = parseFloat(document.getElementById('alpha-pareada').value);
            const tipo = document.getElementById('tipo-pareada').value;
            
            const t = (dMedia - mu0) / (dStd / Math.sqrt(n));
            const df = n - 1;
            
            // Calcular p-valor
            let pValor;
            if (tipo === 'bilateral') {
                pValor = 2 * (1 - tCDF(Math.abs(t), df));
            } else if (tipo === 'mayor') {
                pValor = 1 - tCDF(t, df);
            } else {
                pValor = tCDF(t, df);
            }
            
            const decision = pValor < alpha;
            
            let html = '<div class="result-box">';
            html += '<h4>Prueba de Muestras Pareadas</h4>';
            html += '<div class="hypothesis-display">';
            if (tipo === 'bilateral') {
                html += `$$H_0: \\mu_d = ${mu0}$$`;
                html += `$$H_1: \\mu_d \\neq ${mu0}$$`;
            } else if (tipo === 'mayor') {
                html += `$$H_0: \\mu_d \\leq ${mu0}$$`;
                html += `$$H_1: \\mu_d > ${mu0}$$`;
            } else {
                html += `$$H_0: \\mu_d \\geq ${mu0}$$`;
                html += `$$H_1: \\mu_d < ${mu0}$$`;
            }
            html += '</div>';
            
            html += '<div class="stat-display">';
            html += `<div class="stat-item"><div class="label">Media diferencias</div><div class="value">${dMedia.toFixed(2)}</div></div>`;
            html += `<div class="stat-item"><div class="label">Desv. Est.</div><div class="value">${dStd.toFixed(2)}</div></div>`;
            html += `<div class="stat-item"><div class="label">n pares</div><div class="value">${n}</div></div>`;
            html += `<div class="stat-item"><div class="label">t calculado</div><div class="value">${t.toFixed(4)}</div></div>`;
            html += `<div class="stat-item"><div class="label">gl</div><div class="value">${df}</div></div>`;
            html += `<div class="stat-item"><div class="label">p-valor</div><div class="value">${pValor.toFixed(4)}</div></div>`;
            html += '</div>';
            
            html += `<div class="conclusion ${decision ? 'reject' : 'no-reject'}">`;
            html += `<strong>Decisi√≥n:</strong> ${decision ? 'Rechazar H‚ÇÄ' : 'No rechazar H‚ÇÄ'}<br>`;
            if (decision) {
                html += `<strong>Conclusi√≥n:</strong> Existe evidencia de diferencia significativa entre las mediciones pareadas.`;
                html += `<br>La diferencia promedio es de ${dMedia.toFixed(2)} unidades.`;
            } else {
                html += `<strong>Conclusi√≥n:</strong> No hay evidencia suficiente de diferencia entre las mediciones.`;
            }
            html += '</div>';
            
            html += '<div class="formula-box" style="margin-top: 15px;">';
            html += '<h4>C√°lculo:</h4>';
            html += `<p>$$t = \\frac{\\bar{d} - \\mu_0}{s_d / \\sqrt{n}} = \\frac{${dMedia} - ${mu0}}{${dStd} / \\sqrt{${n}}} = ${t.toFixed(4)}$$</p>`;
            html += `<p>Esta prueba es equivalente a una prueba t para una muestra sobre las diferencias.</p>`;
            html += '</div>';
            
            html += '</div>';
            
            document.getElementById('resultados-pareada').innerHTML = html;
            if (window.MathJax) MathJax.typesetPromise();
        }

        // Cargar ejemplos
        function cargarEjemploDosMedias(num) {
            if (num === 1) {
                document.getElementById('x1-dos').value = 75;
                document.getElementById('s1-dos').value = 10;
                document.getElementById('n1-dos').value = 30;
                document.getElementById('x2-dos').value = 82;
                document.getElementById('s2-dos').value = 12;
                document.getElementById('n2-dos').value = 30;
                document.getElementById('tipo-dos-medias').value = 'bilateral';
            } else if (num === 2) {
                document.getElementById('x1-dos').value = 95;
                document.getElementById('s1-dos').value = 15;
                document.getElementById('n1-dos').value = 25;
                document.getElementById('x2-dos').value = 88;
                document.getElementById('s2-dos').value = 18;
                document.getElementById('n2-dos').value = 25;
                document.getElementById('tipo-dos-medias').value = 'mayor';
            }
        }

        function cargarEjemploDosProporcion(num) {
            if (num === 1) {
                document.getElementById('x1-prop').value = 48;
                document.getElementById('n1-prop').value = 100;
                document.getElementById('x2-prop').value = 36;
                document.getElementById('n2-prop').value = 100;
                document.getElementById('tipo-dos-prop').value = 'bilateral';
            } else if (num === 2) {
                document.getElementById('x1-prop').value = 65;
                document.getElementById('n1-prop').value = 150;
                document.getElementById('x2-prop').value = 50;
                document.getElementById('n2-prop').value = 150;
                document.getElementById('tipo-dos-prop').value = 'mayor';
            }
        }

        function cargarEjemploPareada(num) {
            if (num === 1) {
                document.getElementById('d-media').value = 5.2;
                document.getElementById('d-std').value = 8.5;
                document.getElementById('n-pareada').value = 20;
                document.getElementById('mu0-pareada').value = 0;
                document.getElementById('tipo-pareada').value = 'bilateral';
            } else if (num === 2) {
                document.getElementById('d-media').value = 12.5;
                document.getElementById('d-std').value = 15.2;
                document.getElementById('n-pareada').value = 15;
                document.getElementById('mu0-pareada').value = 0;
                document.getElementById('tipo-pareada').value = 'mayor';
            }
        }

        // Inicializar MathJax cuando se carga la p√°gina
        window.addEventListener('load', function() {
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        });
    </script>
</body>
</html>

